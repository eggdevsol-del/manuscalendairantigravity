<mxfile host="app.diagrams.net" modified="2026-02-08T06:57:23.000Z" agent="Antigravity" version="24.0.0" etag="patent-fig5-v1">
  <diagram name="FIG. 5 - Data Structures" id="fig5-data-structures">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="1000" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title" value="FIG. 5: DATA STRUCTURES AND TYPE DEFINITIONS" style="text;html=1;strokeColor=#666666;fillColor=#f5f5f5;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;strokeWidth=2" vertex="1" parent="1">
          <mxGeometry x="200" y="20" width="1000" height="50" as="geometry" />
        </mxCell>
        
        <!-- WorkDay Structure (700) -->
        <mxCell id="700" value="700: WorkDay Data Structure" style="swimlane;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontStyle=1;fontSize=12;startSize=30" vertex="1" parent="1">
          <mxGeometry x="100" y="100" width="400" height="280" as="geometry" />
        </mxCell>
        
        <mxCell id="workday_fields" value="FIELDS:&#xa;&#xa;• day: String&#xa;  - Day of week name&#xa;  - Values: 'Monday', 'Tuesday', ..., 'Sunday'&#xa;  - Case-insensitive matching&#xa;&#xa;• enabled: Boolean&#xa;  - Whether this day is available for scheduling&#xa;  - true = day is active, false = day is blocked&#xa;&#xa;• start: String (optional)&#xa;  - Work day start time&#xa;  - Format: 'HH:MM' or 'HH:MM AM/PM'&#xa;  - Example: '09:00', '09:00 AM'&#xa;&#xa;• startTime: String (optional)&#xa;  - Alias for 'start' (backward compatibility)&#xa;&#xa;• end: String (optional)&#xa;  - Work day end time&#xa;  - Format: 'HH:MM' or 'HH:MM AM/PM'&#xa;  - Example: '17:00', '05:00 PM'&#xa;&#xa;• endTime: String (optional)&#xa;  - Alias for 'end' (backward compatibility)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;fontFamily=Courier New" vertex="1" parent="700">
          <mxGeometry x="10" y="40" width="380" height="230" as="geometry" />
        </mxCell>
        
        <!-- AppointmentInterval Structure (710) -->
        <mxCell id="710" value="710: AppointmentInterval Data Structure" style="swimlane;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontStyle=1;fontSize=12;startSize=30" vertex="1" parent="1">
          <mxGeometry x="550" y="100" width="400" height="180" as="geometry" />
        </mxCell>
        
        <mxCell id="interval_fields" value="FIELDS:&#xa;&#xa;• startTime: Date (ISO 8601 timestamp)&#xa;  - Appointment start time&#xa;  - Timezone-aware Date object&#xa;  - Example: 2026-02-08T09:00:00+11:00&#xa;&#xa;• endTime: Date (ISO 8601 timestamp)&#xa;  - Appointment end time&#xa;  - Timezone-aware Date object&#xa;  - Example: 2026-02-08T11:00:00+11:00&#xa;&#xa;USAGE:&#xa;  Represents a time interval for both:&#xa;  - Existing appointments (conflicts to avoid)&#xa;  - Newly scheduled sessions (self-overlap prevention)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;fontFamily=Courier New" vertex="1" parent="710">
          <mxGeometry x="10" y="40" width="380" height="130" as="geometry" />
        </mxCell>
        
        <!-- ProjectAvailabilityInput Structure (720) -->
        <mxCell id="720" value="720: ProjectAvailabilityInput Data Structure" style="swimlane;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontStyle=1;fontSize=12;startSize=30" vertex="1" parent="1">
          <mxGeometry x="1000" y="100" width="350" height="340" as="geometry" />
        </mxCell>
        
        <mxCell id="input_fields" value="FIELDS:&#xa;&#xa;• serviceDuration: Integer&#xa;  - Duration in minutes&#xa;  - Must be > 0&#xa;&#xa;• sittings: Integer&#xa;  - Number of sessions to schedule&#xa;  - Must be >= 1&#xa;&#xa;• frequency: Enum&#xa;  - Values: 'single' | 'consecutive' |&#xa;            'weekly' | 'biweekly' | 'monthly'&#xa;  - Determines spacing between sessions&#xa;&#xa;• startDate: Date&#xa;  - Earliest possible start date&#xa;  - ISO 8601 timestamp&#xa;&#xa;• workSchedule: Array&lt;WorkDay&gt;&#xa;  - Provider availability configuration&#xa;  - See structure 700&#xa;&#xa;• existingAppointments: Array&lt;AppointmentInterval&gt;&#xa;  - Current bookings to avoid&#xa;  - See structure 710&#xa;&#xa;• timeZone: String&#xa;  - IANA timezone identifier&#xa;  - Example: 'Australia/Sydney'" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;fontFamily=Courier New" vertex="1" parent="720">
          <mxGeometry x="10" y="40" width="330" height="290" as="geometry" />
        </mxCell>
        
        <!-- ProjectAvailabilityOutput Structure (730) -->
        <mxCell id="730" value="730: ProjectAvailabilityOutput Data Structure" style="swimlane;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1;fontSize=12;startSize=30" vertex="1" parent="1">
          <mxGeometry x="100" y="420" width="400" height="200" as="geometry" />
        </mxCell>
        
        <mxCell id="output_fields" value="FIELDS:&#xa;&#xa;• dates: Array&lt;Date&gt;&#xa;  - Scheduled appointment dates&#xa;  - ISO 8601 timestamps&#xa;  - Length equals 'sittings' input parameter&#xa;  - Ordered chronologically&#xa;  - Example: [&#xa;      2026-02-10T09:00:00+11:00,&#xa;      2026-02-17T09:00:00+11:00,&#xa;      2026-02-24T09:00:00+11:00&#xa;    ]&#xa;&#xa;• totalCost: Decimal&#xa;  - Total price for all sessions&#xa;  - Calculated as: price × sittings&#xa;  - Currency value (e.g., 450.00)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;fontFamily=Courier New" vertex="1" parent="730">
          <mxGeometry x="10" y="40" width="380" height="150" as="geometry" />
        </mxCell>
        
        <!-- FrequencyEnum (740) -->
        <mxCell id="740" value="740: FrequencyEnum Type Definition" style="swimlane;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=1;fontSize=12;startSize=30" vertex="1" parent="1">
          <mxGeometry x="550" y="320" width="400" height="220" as="geometry" />
        </mxCell>
        
        <mxCell id="freq_values" value="ENUMERATION VALUES:&#xa;&#xa;• 'single'&#xa;  - One-time appointment (no repetition)&#xa;  - Used when sittings = 1&#xa;&#xa;• 'consecutive'&#xa;  - Daily consecutive sessions&#xa;  - Next session: currentDate + 1 day&#xa;&#xa;• 'weekly'&#xa;  - Weekly interval&#xa;  - Next session: currentDate + 7 days&#xa;&#xa;• 'biweekly'&#xa;  - Bi-weekly interval&#xa;  - Next session: currentDate + 14 days&#xa;&#xa;• 'monthly'&#xa;  - Monthly interval&#xa;  - Next session: currentDate + 1 month&#xa;  - Handles month-end edge cases" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;fontFamily=Courier New" vertex="1" parent="740">
          <mxGeometry x="10" y="40" width="380" height="170" as="geometry" />
        </mxCell>
        
        <!-- TimeComponents (750) -->
        <mxCell id="750" value="750: TimeComponents Data Structure" style="swimlane;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontStyle=1;fontSize=12;startSize=30" vertex="1" parent="1">
          <mxGeometry x="1000" y="480" width="350" height="140" as="geometry" />
        </mxCell>
        
        <mxCell id="time_fields" value="FIELDS:&#xa;&#xa;• hour: Integer&#xa;  - Hour component (0-23 for 24-hour format)&#xa;  - Range: 0 <= hour <= 23&#xa;&#xa;• minute: Integer&#xa;  - Minute component&#xa;  - Range: 0 <= minute <= 59&#xa;&#xa;USAGE:&#xa;  Intermediate structure for time parsing&#xa;  Returned by parseTime() function" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;fontFamily=Courier New" vertex="1" parent="750">
          <mxGeometry x="10" y="40" width="330" height="90" as="geometry" />
        </mxCell>
        
        <!-- BusySlots Array (760) -->
        <mxCell id="760" value="760: busySlots Dynamic Array" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontStyle=1;fontSize=12;startSize=30" vertex="1" parent="1">
          <mxGeometry x="100" y="660" width="500" height="200" as="geometry" />
        </mxCell>
        
        <mxCell id="busy_desc" value="TYPE: Array&lt;AppointmentInterval&gt;&#xa;&#xa;PURPOSE:&#xa;  Self-overlap prevention mechanism&#xa;  Dynamically updated during multi-session scheduling&#xa;&#xa;INITIALIZATION:&#xa;  busySlots = [...existingAppointments]&#xa;  (Clone of existing appointments)&#xa;&#xa;UPDATES:&#xa;  After each session is scheduled:&#xa;  busySlots.push({&#xa;    startTime: newSessionStart,&#xa;    endTime: newSessionStart + serviceDuration&#xa;  })&#xa;&#xa;USAGE:&#xa;  Passed to findNextAvailableSlot() to prevent&#xa;  newly scheduled sessions from overlapping with:&#xa;  1. Existing appointments (from database)&#xa;  2. Previously scheduled sessions (from current operation)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;fontFamily=Courier New" vertex="1" parent="760">
          <mxGeometry x="10" y="40" width="480" height="150" as="geometry" />
        </mxCell>
        
        <!-- Novel Feature Annotation -->
        <mxCell id="novel_busy" value="NOVEL FEATURE:&#xa;Dynamic busySlots array&#xa;enables self-overlap&#xa;prevention without&#xa;database writes during&#xa;scheduling process" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff4e6;strokeColor=#ff9800;fontSize=10;fontStyle=2;dashed=1;dashPattern=5 5" vertex="1" parent="1">
          <mxGeometry x="650" y="690" width="180" height="100" as="geometry" />
        </mxCell>
        
        <mxCell id="edge_novel_busy" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;strokeColor=#ff9800;" edge="1" parent="1" source="novel_busy" target="760">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Data Flow Diagram -->
        <mxCell id="flow_title" value="DATA FLOW RELATIONSHIPS" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="850" y="660" width="500" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="flow_box" value="INPUT (720)&#xa;ProjectAvailabilityInput&#xa;  ↓&#xa;  ├─→ workSchedule: Array&lt;WorkDay (700)&gt;&#xa;  ├─→ existingAppointments: Array&lt;AppointmentInterval (710)&gt;&#xa;  └─→ frequency: FrequencyEnum (740)&#xa;  ↓&#xa;PROCESSING&#xa;  ├─→ Initialize busySlots (760)&#xa;  ├─→ Parse times using TimeComponents (750)&#xa;  └─→ Find slots using collision detection&#xa;  ↓&#xa;OUTPUT (730)&#xa;ProjectAvailabilityOutput&#xa;  ├─→ dates: Array&lt;Date&gt;&#xa;  └─→ totalCost: Decimal" style="text;html=1;strokeColor=#666666;fillColor=#ffffff;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=10;fontFamily=Courier New" vertex="1" parent="1">
          <mxGeometry x="850" y="700" width="500" height="260" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
